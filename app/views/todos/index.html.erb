<!-- Rails 提供的 remote: true 只能使用在超連結和表單上，如果是這兩種情況以外的需求，就需要自行綁定事件來發送 AJAX 請求。 -->

<div class="container">

  <h1 class="text-center">To Do List</h1>

  <div class="panel panel-info">
    <div class="panel-heading">
      <h3 class="panel-title">事項清單</h3>
    </div>

    <!-- Add new todo -->
    <div class="panel-body">
    <%= form_for @todo, {class: "my-form", remote: true } do |f| %>
    <!-- 加上 remote: true 字樣表示使用非同步請求 -->
      <%= f.label "Add New To-Do" %>
      <div class="input-group">
        <%= f.text_area :title, :class => "form-control" %>
        <div class="input-group-addon">
          <%= f.submit "Create", :class => "my-btn my-btn-transparent" %>
        </div>
      </div>
      <% end %>
    </div>

    <!-- Todo List -->
    <table class="my-table table table-hover">
      <tbody id="todolist">
        <% @todos.each do |todo| %>
          <tr id="todo-<%= todo.id %>">
            <!-- 設定為 todo-id，方便使用 jQuery 選擇器和方法對 todo 內容進行更動。 -->
            <%= render :partial => "todo", :locals => { :todo => todo } %>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
